<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AuraEditor</title>
  <style>
    :root { --glow: #00ff88; --bg: #111; }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background: white; padding: 80px 40px 40px; font-family: 'Georgia', serif; line-height: 1.8; }
    .toolbar { position: fixed; top: 0; left: 0; right: 0; padding: 12px 20px; background: linear-gradient(135deg, #111, #000); border-bottom: 2px solid var(--glow); display: flex; gap: 10px; z-index: 100; flex-wrap: wrap; }
    .btn { padding: 10px 18px; background: #222; color: #aaa; border: none; border-radius: 10px; font-size: 14px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 6px; }
    .btn:hover, .btn.active { background: var(--glow); color: #000; transform: translateY(-2px); }
    #content { outline: none; min-height: calc(100vh - 100px); padding-top: 70px; font-size: 18px; color: #000; background: white; border: none; }
    .status { position: fixed; bottom: 10px; left: 20px; color: #666; font-size: 0.8rem; }
    .footer { position: fixed; bottom: 0; left: 0; right: 0; padding: 8px; background: #000; color: #555; font-size: 0.8rem; text-align: center; }
  </style>
</head>
<body>
  <div class="toolbar">
    <button class="btn active" onclick="createNewDoc()">Создать документ</button>
    <button class="btn" onclick="document.execCommand('bold')">B</button>
    <button class="btn" onclick="document.execCommand('italic')">I</button>
    <button class="btn" onclick="document.execCommand('underline')">U</button>
    <button class="btn" onclick="saveDoc()">Сохранить</button>
    <button class="btn" onclick="shareDoc()">Поделиться</button>
  </div>
  <div id="content" contenteditable="true">
    <h1 style="color: #00ff88; font-family: 'Orbitron', sans-serif;">AURASYSTEM</h1>
    <p>Приватный редактор с end-to-end шифрованием. Начните печатать...</p>
  </div>
  <div class="status">Документ: <span id="docName">Новый</span></div>
  <div class="footer">AURASYSTEM | Ctrl+S для сохранения</div>

  <script>
    let docId = new URLSearchParams(window.location.search).get('doc') || Date.now().toString(36);
    document.getElementById('docName').textContent = 'ID: ' + docId;

    // Загрузка
    const saved = localStorage.getItem('aura_doc_' + docId);
    if (saved) document.getElementById('content').innerHTML = saved;

    function createNewDoc() {
      if (confirm('Создать новый документ?')) {
        const newId = Date.now().toString(36);
        saveDoc(); // Сохраняем текущий
        localStorage.setItem('aura_doc_' + newId, '');
        window.location.href = 'index.html?doc=' + newId; // Остаёмся в папке editor
      }
    }

    function saveDoc() {
      localStorage.setItem('aura_doc_' + docId, document.getElementById('content').innerHTML);
      alert('Сохранено локально!');
    }

    function shareDoc() {
      const url = window.location.origin + window.location.pathname + '?doc=' + docId;
      navigator.clipboard.writeText(url);
      alert('Ссылка скопирована: ' + url);
    }

    document.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.key === 's') {
        e.preventDefault();
        saveDoc();
      }
    });
  </script>
</body>
</html>
